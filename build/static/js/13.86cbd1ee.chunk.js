(this["webpackJsonpdw-fazhionz"]=this["webpackJsonpdw-fazhionz"]||[]).push([[13],{202:function(n,e,t){"use strict";t.r(e);var i=t(1),a=t(3),c=t(11),r=t(2),s=t(128),o=t(4);function l(){var n=Object(s.useStripe)(),e=Object(s.useElements)(),t=Object(r.useState)(null),l=Object(c.a)(t,2),d=l[0],b=l[1],j=Object(r.useState)(!1),u=Object(c.a)(j,2),h=u[0],p=u[1],m=function(){var t=Object(a.a)(Object(i.a)().mark((function t(a){var c,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n&&e){t.next=3;break}return t.abrupt("return");case 3:return p(!0),t.next=6,n.confirmPayment({elements:e,confirmParams:{return_url:"".concat(window.location.origin,"/completion")}});case 6:c=t.sent,"card_error"===(r=c.error).type||"validation_error"===r.type?b(r.message):b("An unexpected error occured."),p(!1);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return Object(o.jsxs)("form",{id:"payment-form",onSubmit:m,children:[Object(o.jsx)(s.PaymentElement,{id:"payment-element"}),Object(o.jsx)("button",{disabled:h||!n||!e,id:"submit",children:Object(o.jsx)("span",{id:"button-text",children:h?"Processing ... ":"Pay now"})}),d&&Object(o.jsx)("div",{id:"payment-message",children:d})]})}var d,b,j,u,h,p,m,x,O,f,g,v,w,y=t(129),k=t(21),N=t(36),E=t(195),T=t(199),S=t(48),z=t(152),C=t(12),P=t(16),q=P.b.div(d||(d=Object(C.a)(["\n    //position: relative;\n\twidth: 100%;\n    //height: 50%;\n\tdisplay: flex;\n\tpadding: 0.5em 0;\n\t//font-size: 20px;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: all 0.3s ease-in-out;\n\n    .sect {\n        //position: relative;\n        display: flex;\n        width: 25%;\n        //margin-left: 0;\n        align-items: center;\n\n        :last-child {\n            width: 12%;\n\n        }\n    }\n\n    &:hover, &:active {\n    background-color: rgba(0, 0, 0, .05);\n    }  \n\n    &:last-child {\n        //border-bottom: 1px solid darkgrey;\n    }\n\n    @media (orientation: portrait) {\n        //font-size: 19px;\n        //width: 95%;\n    }\n\n    @media only screen and (max-width: 900px) {\n        //padding-right: 5px;\n    }\n"]))),I=P.b.div(b||(b=Object(C.a)(["\n    width: 12.5%;\n    height: 125px;\n    //padding-right: 15px;\n    //height: 100px;\n    object-fit: stretch;\n    overflow: hidden;\n\n    img {\n        width: 100%;\n        object-fit: stretch;\n        overflow: hidden;\n    }\n"]))),U=P.b.div(j||(j=Object(C.a)(["\n    width: 100%;\n    display: flex;\n    justify-content: start;\n    align-items: center;\n    gap: 1.5em;\n    padding-left: 7.5em;\n\n   \n    // @media only screen and (max-width: 600px) {\n    //     display: grid;\n    //     grid-template-columns: 1fr auto;\n    //     grid-template-areas: \n    //         '  name      remove '\n    //         '  quantity  price ';\n    //     gap: 10px;\n\n    //     width: 100%;\n\n    //     .name { width: 100%; }\n    //     .remove-button, .price { \n    //         justify-self: right;\n    //         margin-right: 10px; \n    //     }\n    //     .price { margin-right: 26px; }\n    // }\n"]))),A=P.b.span(u||(u=Object(C.a)(["\n    grid-area: name;\n    //width: 28%;\n\n    @media only screen and (max-width: 800px) {\n        //font-size: 16px;\n    }\n"]))),D=P.b.span(h||(h=Object(C.a)(["\n    grid-area: quantity;\n    //position: relative;\n    //width: 25%;\n    //left: 25px;\n    display: flex;\n    margin-left: -1.25em;\n    //height: 22px;\n\n    @media (width <= 700px) {\n        margin-left: -2em;\n    }\n\n    .arrow {\n      cursor: pointer;\n      border: 1px solid darkgrey;\n      display: flex;\n\n      @media (width <= 700px) {\n        display: none;\n      }\n    }\n\n    \n\n    .value {\n      display: flex;\n      text-align: center;\n      margin: 0 15px;\n      width: 60px;\n      background-color: white;\n    }\n\n    @media only screen and (min-width: 700px) {\n        top: 6px;\n    }\n\n    @media only screen and (max-width: 600px) {\n        left: 0;\n    }\n"]))),L=P.b.span(p||(p=Object(C.a)(["\n    grid-area: price;\n    padding: 0 0.5em;\n    margin: 0 auto;\n"]))),F=P.b.div(m||(m=Object(C.a)(["\n    grid-area: remove;\n    //width: 20%;\n    text-align: center;\n    margin-right: 0.5em;\n    cursor: pointer;\n\n    .trash-icon {\n        width: 30px;\n        height: 30px;\n        \n    }\n\n    &:hover {\n      color: maroon;\n    }\n"]))),J=t(28),K=(t(154),t(114)),R=function(n){var e=n.cartItem,t=Object(k.d)(N.b),s=Object(k.c)(),l=Object(r.useContext)(K.a).currentUser,d=Object(r.useState)(!0),b=Object(c.a)(d,2),j=b[0],u=b[1],h=e.name,p=e.imageUrl,m=e.price,x=e.quantity,O=(Number(m-.15*m)*x).toFixed(2),f=Object(r.useState)(x),g=Object(c.a)(f,2),v=g[0],w=g[1],y=Object(r.useRef)(x),C={initial:{opacity:1,scale:1},animate:{opacity:j?1:0,scale:j?1:0},exit:{opacity:0,scale:0}};return Object(o.jsx)(z.a.div,{initial:"initial",animate:"animate",exit:"exit",variants:C,transition:{duration:.5},style:{pointerEvents:j?"auto":"none"},children:Object(o.jsxs)(q,{className:"checkout-item",children:[Object(o.jsx)(I,{className:"image-container                                                                                                                                                                                                                        ",children:Object(o.jsx)("img",{src:p,alt:"item"})}),Object(o.jsxs)(U,{children:[Object(o.jsx)(A,{className:"name sect",children:h}),Object(o.jsxs)(D,{className:"quantity sect",children:[Object(o.jsx)("div",{className:"arrow",onClick:function(){return s(Object(S.d)(e))},children:Object(o.jsx)(T.a,{})}),Object(o.jsx)("input",{type:"input",id:"value",className:"value",ref:y,onChange:function(n){if(console.log("QUANTITY:",n.target.value),0!==n.target.value.length)w(parseInt(n.target.value)),e.quantity=v,s(Object(S.a)(e));else{if("0"===y.current.value||""===y.current.value){e.quantity=0,u(!1);setTimeout((function n(){e&&s(n())}),400)}Object(J.k)(l,t)}},onClick:function(n){n.target.select()},onKeyUp:function(n){13===n.keyCode&&y.current.blur()},onBlur:function(){if("0"===y.current.value||""===y.current.value){e.quantity=1,u(!1);var n=function(){var n=Object(a.a)(Object(i.a)().mark((function n(){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&s(Object(S.c)(e)),n.next=3,Object(J.k)(l,t);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();setTimeout(n,400)}},value:e.quantity}),Object(o.jsx)("div",{className:"arrow",onClick:function(){return s(Object(S.a)(e))},children:Object(o.jsx)(T.b,{})})]}),Object(o.jsxs)(L,{className:"price sect",children:["$",O]}),Object(o.jsx)(F,{className:"remove-button sect",onClick:function(){return function(n){u(!1),setTimeout((function(){n?s(Object(S.c)(n)):console.log("NO ITEM TO DELETE"),Object(J.k)(l,t)}),400)}(e)},children:Object(o.jsx)(E.c,{className:"trash-icon"})})]})]})})},_=t(73),M=P.b.div(x||(x=Object(C.a)(["\n  width: 100%;\n  padding: 0 15%;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 0 auto;\n  margin-bottom: -75vh;\n  margin-top: 4em;\n  scrollbar-width: thin;\n\n  @media (width <= 900px) {\n    padding: 0 5%;\n  }\n\n  // @media screen and (max-width: 900px) {\n  //     position: relative;\n  //     width: 85vw;\n  //     min-height: 60vh;\n  //     //height: 100vh;\n  //     top: -5vh;\n  //     margin-bottom: -80vh;\n  // }\n"]))),Q=P.b.div(O||(O=Object(C.a)(["\n  width: 100%;\n  //height: 40%;\n  font-size: 1.4rem;\n  font-weight: bold;\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid darkgrey;\n\n  .header-block {\n    text-transform: capitalize;\n    width: 20%;\n\n    &.description {\n      position: relative;\n      //left: -30px;\n    }\n\n    &:last-child {\n      width: 12%;\n    }\n  }\n\n  @media only screen and (max-width: 800px) {\n    font-size: clamp(0.8rem, 2.4vw, 2rem);\n  }\n"]))),V=P.b.div(f||(f=Object(C.a)(["\n  //min-height: 10vh;\n  //max-height: 50vh;\n  margin-top: 20px;\n  width: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-width: thin;\n"]))),$=P.b.div(g||(g=Object(C.a)(["\n  margin-top: 30px;\n  margin-left: auto;\n  //font-size: 36px;\n  border-top: 1px solid black;\n\n  @media only screen and (max-width: 600px) {\n    //font-size: 28px;\n  }\n"]))),B=P.b.div(v||(v=Object(C.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  text-align: center;\n  margin-top: 30px;\n\n  @media only screen and (max-width: 600px) {\n    font-size: 14px;\n  }\n"]))),H=P.b.div(w||(w=Object(C.a)(["\n  margin-left: auto;\n  margin-top: 10px;\n"])));e.default=function(){var n=Object(k.d)(N.b),e=0,t=Object(r.useState)(0),d=Object(c.a)(t,2),b=d[0],j=d[1],u=Object(r.useState)(null),h=Object(c.a)(u,2),p=h[0],m=h[1],x=Object(r.useState)(""),O=Object(c.a)(x,2),f=O[0],g=O[1];return Object(r.useEffect)((function(){fetch("/config").then(function(){var n=Object(a.a)(Object(i.a)().mark((function n(e){var t,a;return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.json();case 2:t=n.sent,a=t.publishableKey,m(Object(y.a)(a)),console.log("Stripe Promise: ",p);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){fetch("/create-payment-intent",{method:"POST",body:JSON.stringify({})}).then(function(){var n=Object(a.a)(Object(i.a)().mark((function n(e){var t,a;return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.json();case 2:t=n.sent,a=t.clientSecret,g(a);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),console.log("CLIENT SECRET:",f)}),[]),Object(r.useEffect)((function(){n.map((function(n){return e+=n.quantity*n.price})),j(e-.15*e),console.log("UPDATED CHECKOUT TOTAL: "+b)}),[n,e]),Object(o.jsx)(_.a,{children:Object(o.jsxs)(M,{className:"checkout-page",children:[Object(o.jsxs)(Q,{className:"checkout-header maroon",children:[Object(o.jsx)("div",{className:"header-block",children:Object(o.jsx)("span",{children:"Product"})}),Object(o.jsx)("div",{className:"header-block description",children:Object(o.jsx)("span",{children:"Description"})}),Object(o.jsx)("div",{className:"header-block",children:Object(o.jsx)("span",{children:"Quantity"})}),Object(o.jsx)("div",{className:"header-block",children:Object(o.jsx)("span",{children:"Subtotal"})}),Object(o.jsx)("div",{className:"header-block",children:Object(o.jsx)("span",{children:"Remove"})})]}),n?Object(o.jsx)(V,{className:"cart-items",children:n.map((function(n){return Object(o.jsx)(R,{cartItem:n},n.id)}))}):null,Object(o.jsx)($,{className:"total",children:Object(o.jsx)("span",{children:Object(o.jsxs)("h3",{children:["TOTAL: $",b.toFixed(2)]})})}),Object(o.jsx)(B,{className:"checkoutMessage maroon",children:Object(o.jsxs)("p",{children:["** Please use the following test card information for payment! **",Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),"4242 4242 4242 4242",Object(o.jsx)("br",{}),"Exp: 12/28",Object(o.jsx)("br",{}),"CVV: 123"]})}),Object(o.jsx)(H,{className:"button",children:b>0?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Checkout"}),f&&p&&Object(o.jsx)(s.Elements,{stripe:p,options:{clientSecret:f},children:Object(o.jsx)(l,{})})]}):null})]})})}}}]);
//# sourceMappingURL=13.86cbd1ee.chunk.js.map